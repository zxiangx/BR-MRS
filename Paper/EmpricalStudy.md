EmpricalStudy: 
## 实验目的
我们想回答几个问题
(1) 在推荐系统中, 独特信息和协同信息是否重要, 能否给推荐带来额外的提升.  
(2) 现有的推荐算法中,独特信息和协同信息是否没有被学好. 

## 合成数据实验

### 实验目的

合成数据实验旨在回答以下问题：
1. **独特信息和协同信息是否重要？** 
2. **现有方法能否学到这些信息？** 通过在可控环境下做分析。
3. **BR-MRS 是否更好？** 与 baseline相比,是否真的学习到了独特信息。

合成数据的优势在于：我们可以**精确控制**信息结构，并**直接测量**模型是否真的学习到了独特/协同信息。

### 实验设置

**数据生成过程**

我们构造具有可控信息结构的合成推荐数据，包含以下步骤：

**(1) 物品潜变量生成**

对于每个物品 $i$，采样四个独立的潜变量：
$$
\mathbf{z}_t^i, \mathbf{z}_v^i, \mathbf{z}_s^i, \mathbf{z}_r^i \in \mathbb{R}^{k}, \quad k=50
$$
分别表示文本独特信息、视觉独特信息、协同信息、冗余信息，均从标准高斯分布 $\mathcal{N}(\mathbf{0}, \mathbf{I}_k)$ 中独立采样。

**(2) 模态特征生成**

通过线性变换将潜变量映射为可观测的模态特征：
$$
\mathbf{m}_t^i = [\mathbf{z}_t^i; \mathbf{A}\mathbf{z}_s^i; \mathbf{z}_r^i] + \epsilon_t, \quad
\mathbf{m}_v^i = [\mathbf{z}_v^i; \mathbf{B}\mathbf{z}_s^i; \mathbf{z}_r^i] + \epsilon_v
$$

**协同信息的关键设计**：矩阵 $\mathbf{A}, \mathbf{B} \in \mathbb{R}^{k \times k}$ 为互补的降秩矩阵，满足 $\text{rank}(\mathbf{A}) = \text{rank}(\mathbf{B}) = k/2$，且 $\text{rank}([\mathbf{A}; \mathbf{B}]) = k$。这保证了：
- 单独从 $\mathbf{m}_t$ 无法恢复 $\mathbf{z}_s$（只能恢复一半维度）
- 单独从 $\mathbf{m}_v$ 无法恢复 $\mathbf{z}_s$（只能恢复另一半维度）
- 联合 $\mathbf{m}_t$ 和 $\mathbf{m}_v$ 可以完整恢复 $\mathbf{z}_s$

**(3) 用户偏好生成**

每个用户的偏好向量覆盖所有信息类型：
$$
\boldsymbol{\theta}_u = [\boldsymbol{\theta}_t^u; \boldsymbol{\theta}_v^u; \boldsymbol{\theta}_s^u; \boldsymbol{\theta}_r^u], \quad \boldsymbol{\theta}_*^u \sim \mathcal{N}(\mathbf{0}, \mathbf{I}_k)
$$

用户对物品的真实偏好分数：
$$
s^*(u, i) = \gamma_t \langle \boldsymbol{\theta}_t^u, \mathbf{z}_t^i \rangle + \gamma_v \langle \boldsymbol{\theta}_v^u, \mathbf{z}_v^i \rangle + \gamma_s \langle \boldsymbol{\theta}_s^u, \mathbf{z}_s^i \rangle + \gamma_r \langle \boldsymbol{\theta}_r^u, \mathbf{z}_r^i \rangle
$$

其中 $(\gamma_t, \gamma_v, \gamma_s, \gamma_r)$ 是**全局信号强度系数**，控制各信息类型在偏好中的期望贡献。

**可控性**：通过调节 $(\gamma_t, \gamma_v, \gamma_s, \gamma_r)$，我们可以控制推荐任务对各信息类型的依赖程度。
- 当 $\gamma_s$ 较大时，正确排序物品需要捕获协同信息
- 当 $\gamma_t, \gamma_v$ 较大时，正确排序物品需要捕获独特信息
- 无法学到相应信息的方法，在对应设定下整体性能会下降 

**(4) 交互生成**

对每个用户，根据偏好分数 $s^*(u, i)$ 选择 Top-$K$（$K=20$）的物品作为正样本，构成交互矩阵。 这里我们会添加噪声. 


**实验配置**
- 物品数量：$|\mathcal{I}| = 10000$
- 用户数量：$|\mathcal{U}| = 5000$
- 潜变量维度：$k = 50$
- 数据划分：训练集 80%，验证集 10%，测试集 10%(测试集的正样本唯一.)

**对比方法**
- **Concat**：简单拼接融合
- **FREEDOM**：代表性的多模态推荐方法
- **REARM**：加入 InfoNCE 对齐和正交约束的方法
- **BR-MRS**：我们的方法

### 实验结果

**实验A：分信息类型的性能分析**

设置信号强度系数为均匀分布 $(\gamma_t, \gamma_v, \gamma_s, \gamma_r) = (1, 1, 1, 1)$。为了分析各方法对不同信息类型的捕获能力，我们对测试正样本进行分类：对于每个正样本 $(u, i^+)$，计算其被用户选中的主要原因：
$$
\text{type}(u, i^+) = \arg\max_{*} \gamma_* \langle \boldsymbol{\theta}_*^u, \mathbf{z}_*^{i^+} \rangle
$$

然后按类型分组计算 Recall@20。

![分信息类型性能](../icml2026/figure/user_type_robustness.pdf)

**结论1**：现有方法在**协同型正样本**上性能非常差。这说明当物品的吸引力主要来自协同信息时，现有方法几乎无法正确推荐它。

**结论2**：现有方法在**独特型正样本**上性能也有明显差距.

**结论3**：BR-MRS 在所有类型上都表现优异，验证了 CHNS（捕获独特信息）和 Synergy-BPR（捕获协同信息）的有效性。 

**实验B：信号强度变化实验**

我们通过调节全局信号强度系数 $(\gamma_t, \gamma_v, \gamma_s, \gamma_r)$，改变推荐任务对不同信息类型的依赖程度，研究模型性能的鲁棒性。

![信号强度变化实验](../icml2026/figure/UserType_Ratio.pdf)

**(a) 增强独特信息重要性**：固定 $\gamma_s, \gamma_r$，增大 $\gamma_t, \gamma_v$，使正确排序更依赖独特信息。

**发现2**：随着独特信息重要性增加，Baseline 方法性能**下降**，而 BR-MRS **保持稳定**。这表明现有方法对独特信息有一定捕获能力但不充分，BR-MRS 通过 CHNS 显著增强了独特信息的利用。

**(b) 增强协同信息重要性**：固定 $\gamma_t, \gamma_v, \gamma_r$，增大 $\gamma_s$，使正确排序更依赖协同信息。

**发现3（核心发现）**：随着协同信息重要性增加，Baseline 方法性能**急剧下降**并趋近随机，而 BR-MRS **保持稳定**。这是最关键的发现——**现有方法完全学不到协同信息**，当推荐任务需要协同信息时，它们的性能急剧恶化。BR-MRS 通过 Synergy-BPR 有效捕获了协同信息。

### 结论

合成数据实验验证了我们的观点：
1. **独特信息和协同信息对推荐任务很重要**——当任务依赖这些信息时，能否学到它们直接决定性能
2. **现有方法（BPR + InfoNCE + 正交约束）无法有效学习这些信息**——尤其是协同信息，性能非常低
3. **BR-MRS 显著改善了这一问题**——在各种信息依赖结构下都取得稳定的良好性能

## 真实数据实验

### 实验目的

在真实数据上验证合成数据实验的发现：现有方法是否真的难以利用独特信息和协同信息？

### 实验设置

**数据集**：Amazon-Baby

**分组方式**：由于真实数据没有 ground truth 的信息类型标签，我们基于**各分支的预测结果**对测试用户进行后验分类。设 $V, T, F$ 分别表示视觉分支、文本分支、融合分支是否预测正确：

| 类型 | $(V, T, F)$ | 含义 |
|-----|------------|-----|
| **冗余型** | $(✓, ✓, ✓)$ | 单模态和融合都能正确召回 |
| **融合退化型** | $(✓, ✓, ✗)$ | 单模态都能召回，融合反而失败 |
| **视觉独特型** | $(✓, ✗, *)$ | 只有视觉能帮助召回 |
| **文本独特型** | $(✗, ✓, *)$ | 只有文本能帮助召回 |
| **协同型** | $(✗, ✗, ✓)$ | 单模态都失败，只有融合成功 |
| **全部失败** | $(✗, ✗, ✗)$ | 所有分支都无法正确召回，需要更强的信息捕失败

这六种类型构成**完备划分**，覆盖所有 $2^3 = 8$ 种情况。 

### 实验结果

我们统计各方法在不同用户类型上的分布，分析它们对各类信息的捕获能力。

**发现1：正交约束反而降低独特信息的利用**

| 方法 | 视觉独特型用户 | 文本独特型用户 |
|-----|--------------|--------------|
| Baseline | x% | y% |
| + 正交约束 | x'% (↓) | y'% (↓) |

正交约束鼓励模态表征在几何空间上正交，但不能保证分离出的是任务相关的独特信息。加入正交约束后，独特型用户的比例反而下降，说明正交约束可能破坏了有用的独特信息。

**发现2：InfoNCE 不能增加协同信息的利用率**

| 方法 | 协同型用户 |
|-----|----------|
| Baseline | a% |
| + InfoNCE | a'% (≈) |
| BR-MRS | b% (↑↑) |

InfoNCE 最大化模态间互信息，主要捕获冗余信息。加入 InfoNCE 后，协同型用户比例几乎不变，说明它对协同信息的利用没有帮助。BR-MRS 显著提升了协同型用户比例。

**发现3：融合退化现象普遍存在，BR-MRS 显著改善**

| 方法 | 融合退化 | 全部失败 |
|-----|--------------|------------|
| Concat | p% | m% |
| FREEDOM | q% | n% |
| REARM | r% | o% |
| BR-MRS | s% (↓↓) | t% (↓↓) |

现有方法存在大量"融合退化"用户——两个单模态分支都能正确召回，但融合后反而失败。这说明现有融合方式不仅没有利用协同信息，反而引入了干扰。

BR-MRS 带来两方面改善：
1. **减少融合退化**：Synergy-BPR 约束融合分支必须优于单模态分支，避免融合引入干扰
2. **减少全部失败**：通过更好地捕获独特信息和协同信息，原本"无法推荐"的用户变为"可推荐" 

### 结论

真实数据实验验证了合成数据的发现：
1. **正交约束对独特信息无益甚至有害**
2. **InfoNCE 对协同信息几乎无帮助**
3. **融合退化是普遍问题**，BR-MRS 显著减少了融合退化型和难推荐型用户的比例

